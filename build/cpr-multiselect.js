/*!
 * cpr-multiselect
 * author: Bret Little
 * copyright: 2015
 * license: MIT
 * version: 1.0.0
 */
!function(e){function t(s){if(i[s])return i[s].exports;var n=i[s]={exports:{},id:s,loaded:!1};return e[s].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){"use strict";function s(e,t){for(var i,s=!0;s;){s=!1;var n=e,r=t;if(!n)return!1;if(i=n.className.indexOf(r)>-1)return i;e=n.parentElement,t=r,s=!0}}var n=function(e){return e&&e.__esModule?e["default"]:e},r=n(i(1)),l=i(2),o=l.without,a=l.contains,c=l.union,p=l.isNull;i(3);var u=r.createClass({displayName:"DefaultItemComponent",render:function(){var e=this.props.item.firstName,t=this.props.item.lastName;return r.createElement("div",null,r.createElement("div",{className:"cp-multi-selector-item__icon cps-bg-medium-gray cps-gray-5"},""+e[0]+t[0]),r.createElement("div",{className:"cp-multi-selector-item__title"},""+e+" "+t),r.createElement("div",{className:"cp-multi-selector-item__check"},r.createElement("i",{className:"cps-icon cps-icon-lg-check cps-info"})))}}),m=r.createClass({displayName:"MultiSelector",componentWillMount:function(){document.body.addEventListener("click",this.state.close)},componentWillUnmount:function(){document.body.removeEventListener("click",this.state.close)},getInitialState:function(){var e=this;return{selectedItems:this.props.initialSelectedItems||[],dialogDisplayed:!1,activeIndex:null,searchValue:"",close:function(t){s(t.target,"cp-multi-selector")||e.setState({dialogDisplayed:!1})}}},displayDialog:function(e){this.setState({dialogDisplayed:!0})},removeItem:function(e,t){this.setState({selectedItems:o(this.state.selectedItems,e)}),setTimeout(this.triggerItemChange)},getItemTitle:function(e){return""+e.firstName+" "+e.lastName},keyUp:function(e){var t=e.which,i=this.state.activeIndex,s=this.getFilterItems(this.props.items);if(40===t){if(p(i))return this.setState({activeIndex:0});if(i<s.length-1)return this.setState({activeIndex:i+1})}else if(38===t){if(!i)return this.setState({activeIndex:0});if(i>0)return this.setState({activeIndex:i-1})}else if(13===t){if(!p(i))return this.selectItem(s[i])}else if(27===t)return this.setState({activeIndex:null,dialogDisplayed:!1});this.setState({searchValue:e.target.value})},triggerItemChange:function(){this.props.onChange&&this.props.onChange.call(null,this.state.selectedItems)},getSelectedClass:function(e){return a(this.state.selectedItems,e)?"+selected":""},getActiveClass:function(e){return this.state.activeIndex===e?"+highlighted":""},getFilterItems:function(){var e=this,t=void 0===arguments[0]?[]:arguments[0],i=this.props.getItemTitle||this.getItemTitle;return t.filter(function(t){return i(t).toLowerCase().indexOf(e.state.searchValue.toLowerCase())>-1})},getSearchItems:function(){var e=this,t=void 0===arguments[0]?[]:arguments[0],i=this.props.ItemComponent||u;return this.getFilterItems(t).map(function(t,s){return r.createElement("div",{className:"cp-multi-selector-item "+e.getSelectedClass(t)+" "+e.getActiveClass(s),onClick:e.selectItem.bind(e,t)},r.createElement(i,{item:t}))})},selectItem:function(e,t){var i=this.state.selectedItems;a(i,e)?this.setState({selectedItems:o(i,e)}):this.setState({selectedItems:c(i,[e])}),setTimeout(this.triggerItemChange)},positionDialog:function(){var e=this;setTimeout(function(){var t=r.findDOMNode(e),i=t.clientHeight,s=t.querySelector(".cp-multi-selector__dialog");s.style.top=i+1+"px",t.querySelector(".cp-multi-selector__dialog__input").focus()},100)},render:function(){var e=this,t=this.props.getItemTitle||this.getItemTitle,i=this.state.selectedItems.map(function(i){return r.createElement("div",{className:"cp-multi-selector__pill cps-white cps-bg-gray-10"},r.createElement("span",{style:{verticalAlign:"top"}},t(i)),r.createElement("i",{onClick:e.removeItem.bind(e,i),className:"cps-icon cps-icon-sm-close"}))}),s=void 0;return this.state.dialogDisplayed&&(s=r.createElement("div",{className:"cp-multi-selector__dialog depth-z2",style:{}},r.createElement("input",{onKeyUp:this.keyUp,className:"cps-form-control cp-multi-selector__dialog__input",placeholder:"Type a collaborators name..."}),r.createElement("div",{className:"cp-multi-selector__dialog__items"},this.getSearchItems(this.props.items))),this.positionDialog()),r.createElement("div",{className:"cp-multi-selector"},r.createElement("input",{type:"input",className:"cp-multi-selector__hidden-input",onFocus:this.displayDialog}),r.createElement("div",{onClick:this.displayDialog,className:"cp-multi-selector__main-input cps-form-control"},i),s)}});window.MultiSelector||(window.MultiSelector=m),e.exports=m},function(e,t){e.exports=React},function(e,t){e.exports=_},function(e,t,i){var s=i(4);"string"==typeof s&&(s=[[e.id,s,""]]);i(6)(s,{})},function(e,t,i){t=e.exports=i(5)(),t.push([e.id,".cp-multi-selector{display:inline-block;position:relative;font-size:1.4rem;width:340px;z-index:1}.cp-multi-selector__hidden-input{position:absolute}.cp-multi-selector__dialog{background:#fff;padding:16px 16px 8px;position:absolute;top:33px;min-width:298px;width:auto;z-index:1;border-radius:2px}.cp-multi-selector__dialog__items{margin:16px -16px 8px}.cp-multi-selector-item{display:block;height:40px;position:relative;padding-top:6px;cursor:pointer;padding-left:16px;padding-right:16px}.cp-multi-selector-item:hover,.cp-multi-selector-item.\\+highlighted{background-color:#F7F7F7}.cp-multi-selector-item.\\+selected .cp-multi-selector-item__icon{background-color:#45A8F8!important}.cp-multi-selector-item.\\+selected .cp-multi-selector-item__check{visibility:visible}.cp-multi-selector-item__icon{display:inline-block;vertical-align:middle;height:28px;width:28px;text-align:center;font-weight:600;padding-top:.6rem;border-radius:2px}.cp-multi-selector-item__title{display:inline-block;position:absolute;left:56px;top:12px}.cp-multi-selector-item__check{display:inline-block;visibility:hidden;float:right;font-size:2.6rem;position:relative;right:.2rem}.cp-multi-selector__main-input.cps-form-control{position:relative;z-index:2;padding:2px 2px 0;min-height:32px;height:auto}.cp-multi-selector__pill{display:inline-block;padding:2px 8px;margin-right:5px;height:25px;margin-bottom:3px;vertical-align:top}.cp-multi-selector__pill.\\+inline{position:relative;top:3px}.cp-multi-selector__pill .cps-icon{position:relative;top:-2px;right:-4px;cursor:pointer}.cp-multi-selector__icon{position:relative}",""])},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var i=this[t];i[2]?e.push("@media "+i[2]+"{"+i[1]+"}"):e.push(i[1])}return e.join("")},e}},function(e,t,i){function s(e,t){for(var i=0;i<e.length;i++){var s=e[i],n=p[s.id];if(n){n.refs++;for(var r=0;r<n.parts.length;r++)n.parts[r](s.parts[r]);for(;r<s.parts.length;r++)n.parts.push(l(s.parts[r],t))}else{for(var o=[],r=0;r<s.parts.length;r++)o.push(l(s.parts[r],t));p[s.id]={id:s.id,refs:1,parts:o}}}}function n(e){for(var t=[],i={},s=0;s<e.length;s++){var n=e[s],r=n[0],l=n[1],o=n[2],a=n[3],c={css:l,media:o,sourceMap:a};i[r]?i[r].parts.push(c):t.push(i[r]={id:r,parts:[c]})}return t}function r(){var e=document.createElement("style"),t=d();return e.type="text/css",t.appendChild(e),e}function l(e,t){var i,s,n;if(t.singleton){var l=f++;i=h||(h=r()),s=a.bind(null,i,l,!1),n=a.bind(null,i,l,!0)}else i=r(),s=c.bind(null,i),n=function(){i.parentNode.removeChild(i)};return s(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;s(e=t)}else n()}}function o(e,t,i){var s=["/** >>"+t+" **/","/** "+t+"<< **/"],n=e.lastIndexOf(s[0]),r=i?s[0]+i+s[1]:"";if(e.lastIndexOf(s[0])>=0){var l=e.lastIndexOf(s[1])+s[1].length;return e.slice(0,n)+r+e.slice(l)}return e+r}function a(e,t,i,s){var n=i?"":s.css;if(e.styleSheet)e.styleSheet.cssText=o(e.styleSheet.cssText,t,n);else{var r=document.createTextNode(n),l=e.childNodes;l[t]&&e.removeChild(l[t]),l.length?e.insertBefore(r,l[t]):e.appendChild(r)}}function c(e,t){var i=t.css,s=t.media,n=t.sourceMap;if(n&&"function"==typeof btoa)try{i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(JSON.stringify(n))+" */",i='@import url("data:text/css;base64,'+btoa(i)+'")'}catch(r){}if(s&&e.setAttribute("media",s),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var p={},u=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},m=u(function(){return/msie 9\b/.test(window.navigator.userAgent.toLowerCase())}),d=u(function(){return document.head||document.getElementsByTagName("head")[0]}),h=null,f=0;e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=m());var i=n(e);return s(i,t),function(e){for(var r=[],l=0;l<i.length;l++){var o=i[l],a=p[o.id];a.refs--,r.push(a)}if(e){var c=n(e);s(c,t)}for(var l=0;l<r.length;l++){var a=r[l];if(0===a.refs){for(var u=0;u<a.parts.length;u++)a.parts[u]();delete p[a.id]}}}}}]);